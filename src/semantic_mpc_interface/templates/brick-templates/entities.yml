# Brick templates for nodes
# Updated to match S223 templates structure
# TODO: Changed template method (including fixing misconception about dependencies) so have to update SHACL gen
hvac-zone:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:HVAC_Zone .
  optional: [space-name,window-name,tstat-name,hvac-name]
  dependencies:
    - template: has-space
      args: {"name":"name", "target":"space-name"}
    - template: space
      args: {"name":"space-name"}
    - template: has-window
      args: {'name': 'name', 'target':'window-name'}
    - template: window
      args: {'name': 'window-name'}
    - template: has-location
      args: {'name': 'tstat-name', 'target':"name"}
    - template: tstat
      args: {'name': 'tstat-name'}
    - template: air-connected-to
      args: {'name':'hvac-name', 'target':'name'}
    - template: hp-rtu
      args: {'name': 'hvac-name'}

space:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Space ;
        brick:area p:area-name .
  dependencies:
    - template: area
      args: {"name": "area-name"}
window:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    @prefix qudt: <http://qudt.org/schema/qudt/> .
    p:name a brick:Window ;
        brick:area p:area-name ;
        brick:azimuth p:azimuth-name ;
        brick:tilt p:tilt-name .
  dependencies:
    - template: area
      args: {"name": "area-name"}
    - template: azimuth
      args: {"name": "azimuth-name"}
    - template: tilt
      args: {"name": "tilt-name"}
hp-rtu:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:RTU, brick:Packaged_Heat_Pump ;
      brick:coolingCapacity p:cooling_capacity-name ;
      brick:heatingCapacity p:heating_capacity-name ;
      brick:heatingCoefficientOfPerformance p:heating_COP-name ;
      brick:coolingCoefficientOfPerformance p:cooling_COP-name ;
      .
  dependencies:
    - template: cooling-capacity
      args: {"name": "cooling_capacity-name"}
    - template: heating-capacity
      args: {"name": "heating_capacity-name"}
    - template: cooling-COP
      args: {"name": "cooling_COP-name"}
    - template: heating-COP
      args: {"name": "heating_COP-name"}
tstat:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    @prefix qudt: <http://qudt.org/schema/qudt/> .
    @prefix quantitykind: <http://qudt.org/vocab/quantitykind/> .
    @prefix unit: <http://qudt.org/vocab/unit/> .
    p:name a brick:Thermostat ;
      brick:operationalStageCount p:stage_count-name ;
      brick:hasPoint p:setpoint_deadband-name ;
      brick:hasPoint p:tolerance-name ;
      brick:hasPoint p:active-name ;
      brick:resolution p:resolution-name ;
      .
  dependencies:
    - template: tstat-stage_count
      args: {"name": "stage_count-name"}
    - template: tstat-deadband
      args: {"name": "setpoint_deadband-name"}
    - template: tstat-tolerance
      args: {"name": "tolerance-name"}
    - template: tstat-active
      args: {"name": "active-name"}
    - template: tstat-resolution
      args: {"name": "resolution-name"}

# Adding thermostat with heating/cooling/occupancy settings to match S223 template
tstat-heating-cooling-occupancy:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Thermostat ;
      brick:hasPoint p:occ-heating-setpoint ;
      brick:hasPoint p:occ-cooling-setpoint ;
      brick:hasPoint p:unocc-heating-setpoint ;
      brick:hasPoint p:unocc-cooling-setpoint ;
      brick:hasPoint p:active-heating-stages ;
      brick:hasPoint p:active-cooling-stages ;
      brick:hasPoint p:temperature ;
      .
  dependencies:
    - template: occ-heating-setpoint
      args: {"name": "occ-heating-setpoint"}
    - template: occ-cooling-setpoint
      args: {"name": "occ-cooling-setpoint"}
    - template: unocc-heating-setpoint
      args: {"name": "unocc-heating-setpoint"}
    - template: unocc-cooling-setpoint
      args: {"name": "unocc-cooling-setpoint"}
    - template: tstat
      args: {"name": "name"}
    - template: temperature
      args: {"name": "temperature"}  
    - template: active-heating-stages
      args: {"name": "active-heating-stages"}
    - template: active-cooling-stages
      args: {"name": "active-cooling-stages"}

site:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    @prefix qudt: <http://qudt.org/schema/qudt/> .
    @prefix quantitykind: <http://qudt.org/vocab/quantitykind/> .
    @prefix unit: <http://qudt.org/vocab/unit/> .
    @prefix hpf: <urn:hpflex#> .
    p:name a brick:Site ;
      brick:timezone p:timezone-name ;
      brick:latitude p:latitude-name ;
      brick:longitude p:longitude-name ;
      brick:hasNOAAStation p:noaastation-name ;
      .
  dependencies:
    - template: timezone
      args: {"name": "timezone-name"}
    - template: latitude
      args: {"name": "latitude-name"}
    - template: longitude
      args: {"name": "longitude-name"}
    - template: noaastation
      args: {"name": "noaastation-name"}

# Adding connection point templates to match S223, 
# TODO: AI generated, need to check
# air-bidirectional-connectionpoint:
#   body: >
#     @prefix p: <urn:___param___#> .
#     @prefix brick: <https://brickschema.org/schema/Brick#> .
#     @prefix qudt: <http://qudt.org/schema/qudt/> .
#     @prefix quantitykind: <http://qudt.org/vocab/quantitykind/> .
#     @prefix unit: <http://qudt.org/vocab/unit/> .
#     @prefix hpf: <urn:hpflex#> .
#     p:name a brick:Connection_Point ;
#       brick:hasMedium brick:Air ;
#     .

# air-outlet-connectionpoint:
#   body: >
#     @prefix p: <urn:___param___#> .
#     @prefix brick: <https://brickschema.org/schema/Brick#> .
#     @prefix qudt: <http://qudt.org/schema/qudt/> .
#     @prefix quantitykind: <http://qudt.org/vocab/quantitykind/> .
#     @prefix unit: <http://qudt.org/vocab/unit/> .
#     @prefix hpf: <urn:hpflex#> .
#     p:name a brick:Connection_Point, brick:Outlet ;
#       brick:hasMedium brick:Air ;
#     .

# air-inlet-connectionpoint:
#   body: >
#     @prefix p: <urn:___param___#> .
#     @prefix brick: <https://brickschema.org/schema/Brick#> .
#     @prefix qudt: <http://qudt.org/schema/qudt/> .
#     @prefix quantitykind: <http://qudt.org/vocab/quantitykind/> .
#     @prefix unit: <http://qudt.org/vocab/unit/> .
#     @prefix hpf: <urn:hpflex#> .
#     p:name a brick:Connection_Point, brick:Inlet ;
#       brick:hasMedium brick:Air ;
#     .

# connection:
#   body: >
#     @prefix p: <urn:___param___#> .
#     @prefix brick: <https://brickschema.org/schema/Brick#> .
#     @prefix qudt: <http://qudt.org/schema/qudt/> .
#     @prefix quantitykind: <http://qudt.org/vocab/quantitykind/> .
#     @prefix unit: <http://qudt.org/vocab/unit/> .
#     @prefix hpf: <urn:hpflex#> .
#     p:name a brick:Connection .